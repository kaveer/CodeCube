<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:models="clr-namespace:CubeNotes.Models"
    x:Class="CubeNotes.Views.NotesListPage"
    Title="CubeNotes"
    BackgroundColor="{AppThemeBinding Light=#F8F9FA, Dark=#0D0D0D}">

    <Grid RowDefinitions="Auto,*">
  
        <!-- Modern Header with Blur Effect -->
<Border Grid.Row="0"
          BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#1A1A1A}"
StrokeThickness="0">
 <Border.Shadow>
      <Shadow Brush="{AppThemeBinding Light=#00000015, Dark=#00000040}"
  Offset="0,2"
     Radius="12"
     Opacity="1"/>
            </Border.Shadow>
       
            <VerticalStackLayout Padding="24,60,24,24" Spacing="20">
            <!-- Header with Icon -->
     <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="16">
         <Border Grid.Column="0"
       Background="{AppThemeBinding Light=#F0F0F0, Dark=#2A2A2A}"
              WidthRequest="48"
       HeightRequest="48"
     StrokeShape="RoundRectangle 14"
 StrokeThickness="0">
         <Label Text="ðŸ“"
    FontSize="26"
           HorizontalOptions="Center"
            VerticalOptions="Center"/>
       </Border>
       
    <VerticalStackLayout Grid.Column="1" VerticalOptions="Center" Spacing="2">
      <Label Text="My Notes"
         FontSize="28"
        FontAttributes="Bold"
  TextColor="{AppThemeBinding Light=#1A1A1A, Dark=#FFFFFF}"/>
 <Label Text="All your thoughts in one place"
     FontSize="13"
           TextColor="{AppThemeBinding Light=#6B7280, Dark=#9CA3AF}"
  Opacity="0.8"/>
          </VerticalStackLayout>
     
            <Border Grid.Column="2"
 Background="{AppThemeBinding Light=#F0F0F0, Dark=#2A2A2A}"
        WidthRequest="48"
          HeightRequest="48"
   StrokeShape="RoundRectangle 14"
            StrokeThickness="0"
    VerticalOptions="Center">
        <Label Text="âš™ï¸"
   FontSize="20"
           HorizontalOptions="Center"
          VerticalOptions="Center"/>
    </Border>
        </Grid>
      
       <!-- Modern Search Bar -->
         <Border BackgroundColor="{AppThemeBinding Light=#F3F4F6, Dark=#252525}"
             Padding="16,12"
           StrokeShape="RoundRectangle 14"
                StrokeThickness="0">
         <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
     <Label Grid.Column="0"
             Text="ðŸ”"
       FontSize="20"
                VerticalOptions="Center"
         Opacity="0.5"/>
     <Entry Grid.Column="1"
          x:Name="SearchEntry"
   Placeholder="Search notes..."
  TextChanged="OnSearchTextChanged"
     BackgroundColor="Transparent"
   PlaceholderColor="{AppThemeBinding Light=#9CA3AF, Dark=#6B7280}"
         TextColor="{AppThemeBinding Light=#1A1A1A, Dark=#FFFFFF}"
           FontSize="16"
         VerticalOptions="Center"/>
       <Label Grid.Column="2"
         Text="âœ•"
          FontSize="18"
     VerticalOptions="Center"
     Opacity="0.4"
             IsVisible="False"/>
           </Grid>
                </Border>
        
  <!-- Quick Filters -->
     <ScrollView Orientation="Horizontal" HorizontalScrollBarVisibility="Never">
         <HorizontalStackLayout Spacing="10">
          <Border Background="{AppThemeBinding Light=#1A1A1A, Dark=#FFFFFF}"
          Padding="16,8"
      StrokeShape="RoundRectangle 20"
  StrokeThickness="0">
  <Label Text="All"
 FontSize="13"
          FontAttributes="Bold"
       TextColor="{AppThemeBinding Light=#FFFFFF, Dark=#1A1A1A}"/>
           </Border>
  
     <Border Background="{AppThemeBinding Light=#F3F4F6, Dark=#252525}"
               Padding="16,8"
       StrokeShape="RoundRectangle 20"
      StrokeThickness="0">
              <Label Text="ðŸ“Œ Pinned"
            FontSize="13"
           TextColor="{AppThemeBinding Light=#6B7280, Dark=#9CA3AF}"/>
            </Border>
        
      <Border Background="{AppThemeBinding Light=#F3F4F6, Dark=#252525}"
         Padding="16,8"
   StrokeShape="RoundRectangle 20"
StrokeThickness="0">
    <Label Text="ðŸ·ï¸ Tagged"
            FontSize="13"
       TextColor="{AppThemeBinding Light=#6B7280, Dark=#9CA3AF}"/>
           </Border>
     
         <Border Background="{AppThemeBinding Light=#F3F4F6, Dark=#252525}"
          Padding="16,8"
              StrokeShape="RoundRectangle 20"
              StrokeThickness="0">
           <Label Text="ðŸ“ Archive"
           FontSize="13"
        TextColor="{AppThemeBinding Light=#6B7280, Dark=#9CA3AF}"/>
        </Border>
       </HorizontalStackLayout>
                </ScrollView>
            </VerticalStackLayout>
        </Border>

        <!-- Content Area -->
 <Grid Grid.Row="1">
        
    <!-- Loading -->
        <ActivityIndicator x:Name="LoadingIndicator"
            IsRunning="False"
        IsVisible="False"
      Color="{AppThemeBinding Light=#1A1A1A, Dark=#FFFFFF}"
         VerticalOptions="Center"
 HorizontalOptions="Center"/>
   
            <!-- Modern Notes Grid -->
      <CollectionView x:Name="NotesCollectionView"
       SelectionMode="None"
   Margin="20,20,20,100">
     <CollectionView.ItemsLayout>
  <LinearItemsLayout Orientation="Vertical" ItemSpacing="14"/>
      </CollectionView.ItemsLayout>
     
      <CollectionView.ItemTemplate>
     <DataTemplate x:DataType="models:Note">
  <Border Background="{Binding Color}"
          Padding="20"
   StrokeShape="RoundRectangle 16"
    StrokeThickness="0">
                 <Border.Shadow>
  <Shadow Brush="{AppThemeBinding Light=#00000010, Dark=#00000030}"
        Offset="0,4"
      Radius="16"
        Opacity="1"/>
            </Border.Shadow>
    
       <Border.GestureRecognizers>
           <TapGestureRecognizer Tapped="OnNoteTapped"/>
           </Border.GestureRecognizers>
        
          <Grid RowDefinitions="Auto,Auto,Auto,Auto" RowSpacing="12">
   <!-- Header Row -->
     <Grid Grid.Row="0" ColumnDefinitions="*,Auto,Auto" ColumnSpacing="10">
    <!-- Colored Accent Bar -->
         <BoxView Grid.Column="0"
  WidthRequest="4"
          HeightRequest="24"
            CornerRadius="2"
         Color="{AppThemeBinding Light=#1A1A1A, Dark=#FFFFFF}"
  HorizontalOptions="Start"
     VerticalOptions="Center"
                Opacity="0.3"/>
    
   <!-- Title -->
           <Label Grid.Column="0"
        Text="{Binding Title}"
   FontSize="18"
       FontAttributes="Bold"
    TextColor="{AppThemeBinding Light=#1A1A1A, Dark=#FFFFFF}"
                  LineBreakMode="TailTruncation"
   Margin="14,0,0,0"
          VerticalOptions="Center"/>
 
       <!-- Pin Badge -->
     <Border Grid.Column="1"
  Background="{AppThemeBinding Light=#FBBF2440, Dark=#FBBF2460}"
            Padding="10,6"
                  StrokeShape="RoundRectangle 10"
  StrokeThickness="0"
            IsVisible="{Binding IsPinned}">
     <Label Text="ðŸ“Œ"
   FontSize="12"/>
        </Border>
      
               <!-- More Menu -->
              <Label Grid.Column="2"
    Text="â‹¯"
      FontSize="22"
     TextColor="{AppThemeBinding Light=#6B7280, Dark=#9CA3AF}"
                  VerticalOptions="Center"/>
            </Grid>
      
              <!-- Preview Content -->
          <Label Grid.Row="1"
                Text="{Binding Preview}"
        FontSize="15"
        TextColor="{AppThemeBinding Light=#4B5563, Dark=#D1D5DB}"
   LineBreakMode="WordWrap"
       MaxLines="3"
       LineHeight="1.4"/>
  
       <!-- Tags with Modern Chips -->
     <FlexLayout Grid.Row="2"
    Wrap="Wrap"
       JustifyContent="Start"
         AlignItems="Center"
   IsVisible="{Binding Tags, Converter={StaticResource StringNotEmptyConverter}}">
       <Border Background="{AppThemeBinding Light=#E5E7EB, Dark=#374151}"
    Padding="10,5"
           StrokeShape="RoundRectangle 8"
            StrokeThickness="0"
         Margin="0,0,6,0">
  <Label Text="{Binding Tags}"
    FontSize="12"
   FontAttributes="Bold"
       TextColor="{AppThemeBinding Light=#1A1A1A, Dark=#FFFFFF}"/>
    </Border>
        </FlexLayout>
             
<!-- Footer Meta Info -->
     <Grid Grid.Row="3" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="8">
    <Border Grid.Column="0"
         Background="{AppThemeBinding Light=#F3F4F6, Dark=#252525}"
              Padding="8,4"
   StrokeShape="RoundRectangle 6"
   StrokeThickness="0">
   <Label Text="{Binding FormattedDate}"
           FontSize="11"
           TextColor="{AppThemeBinding Light=#6B7280, Dark=#9CA3AF}"/>
                </Border>
       
      <Label Grid.Column="2"
           Text="â†’"
   FontSize="16"
                 TextColor="{AppThemeBinding Light=#6B7280, Dark=#9CA3AF}"
        VerticalOptions="Center"/>
           </Grid>
           </Grid>
               </Border>
           </DataTemplate>
    </CollectionView.ItemTemplate>
  
              <CollectionView.EmptyView>
   <!-- Modern Empty State -->
         <VerticalStackLayout VerticalOptions="Center"
     HorizontalOptions="Center"
 Spacing="24"
                 Padding="40">
    <Border Background="{AppThemeBinding Light=#F3F4F6, Dark=#1A1A1A}"
          WidthRequest="100"
   HeightRequest="100"
       StrokeShape="RoundRectangle 50"
           StrokeThickness="0"
     HorizontalOptions="Center">
         <Label Text="ðŸ“"
         FontSize="52"
              HorizontalOptions="Center"
        VerticalOptions="Center"
     Opacity="0.6"/>
   </Border>
        
              <VerticalStackLayout Spacing="8">
 <Label Text="No notes yet"
      FontSize="24"
       FontAttributes="Bold"
            HorizontalTextAlignment="Center"
            TextColor="{AppThemeBinding Light=#1A1A1A, Dark=#FFFFFF}"/>
        <Label Text="Start capturing your ideas"
      FontSize="15"
 HorizontalTextAlignment="Center"
       TextColor="{AppThemeBinding Light=#6B7280, Dark=#9CA3AF}"/>
      </VerticalStackLayout>
       </VerticalStackLayout>
          </CollectionView.EmptyView>
         </CollectionView>
        </Grid>

    <!-- Modern Floating Action Button -->
    <Border Grid.Row="1"
              WidthRequest="64"
        HeightRequest="64"
                StrokeShape="RoundRectangle 32"
            StrokeThickness="0"
 HorizontalOptions="End"
      VerticalOptions="End"
    Margin="0,0,24,24">
 <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
      <GradientStop Color="#6366F1" Offset="0.0"/>
     <GradientStop Color="#8B5CF6" Offset="1.0"/>
           </LinearGradientBrush>
            </Border.Background>
     <Border.Shadow>
      <Shadow Brush="#6366F180"
             Offset="0,8"
       Radius="24"
         Opacity="1"/>
            </Border.Shadow>
            
            <Border.GestureRecognizers>
      <TapGestureRecognizer Tapped="OnAddNoteTapped"/>
        </Border.GestureRecognizers>
            
            <Label Text="+"
   FontSize="36"
              TextColor="White"
          FontAttributes="Bold"
        HorizontalOptions="Center"
                VerticalOptions="Center"
          Margin="0,-3,0,0"/>
        </Border>
    </Grid>
</ContentPage>
